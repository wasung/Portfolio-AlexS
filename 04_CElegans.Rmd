# C.Elegans Plate experiment

*Question A: "Review the following Excel file in the ./data/CE.LIQ.FLOW.062_Tidydata.xlsx, by opening the file in Excel. See if you can spot anything peculiar about this file. Do not edit the file in any way. Just close it when you are done. (Annoyingly, Excel asks you to save your changes, even if you did not touch anything in the file.)"*
A: Parameters tab is unclear what colomn means what. There is a 'Raw data' column, what does this mean and what is it for? Also would be nice to have some explanation on all the colours and why does the pink column run down so far. The other tabs are even more unclear its hard to find where things are and even more hard to find what it means.

*Question B: "Open the file in R, using the {readxl} package."*
*Question C: "Inspect the data types of columns RawData, compName and compConcentration. What types would you expect from the experimental description above. Have the data types been correctly assigned during the importing of the data into R?"*

C:
```{r ReadXL}
library("here")
library(tidyverse)
library(readxl)


CElegans_data <- read_excel(here::here("Data", "CE.LIQ.FLOW.062_Tidydata.xlsx"))

head(CElegans_data)
```

*Question D:"Create a graph displaying a scatterplot for the CE.LIQ.FLOW.062_Tidydata.xlsx data, for the different compounds and the varying concentrations. Put the compConcentration on the x-axis, the DataRaw counts on the y-axis and assign a colour to each level in compName. Assign a different symbol (shape =) to each level in the expType variable. Try fixing the labels of the x-axis so that we can read them."*
```{r ggplot}
library(ggplot2)
library(tidyverse)


# chr to factor conversion
CElegans_data$compName <- factor(CElegans_data$compName, levels = unique(CElegans_data$compName))
CElegans_data$expType <- factor(CElegans_data$expType, levels = unique(CElegans_data$expType))
CElegans_data$compConcentration <- parse_number(CElegans_data$compConcentration)

# checking the conversion to factor
levels(CElegans_data$compName)
levels(CElegans_data$expType)

str(CElegans_data)

# Plotting the scatterplot with dynamic shape assignment
ggplot(CElegans_data, aes(x = log10(compConcentration), y = RawData)) +
  geom_point(aes(color = compName, shape = expType), size = 1.5, alpha = 0.8, position = position_jitter(width = 0.15)) +
  labs(title = "CE.LIQ", caption = "think of a caption",x = " Log10 Compound Concentration", y = "DataRaw Counts") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

```
*Question E: "When creating the plot under C), what happened with the ordering of the x-axis labels. Explain why this happens. Look at the data-type of the compConcentration column in the data again to find a clue."*
The x-axis labels overlap, you need to angle them slightly so all labels are readable.

(G) The positive control for this experiments is controlPositive. (H) The negative control for this experiment is controlNegative.

*Question I: Think about how you would analyze this experiment to learn whether there is indeed an effect of different concentrations on offspring count and whether the different compounds have a different curve (IC50). Write down you analysis as a step-wise plan.*
Step-wise plan (need to make)

*Question K Normalize the data for the controlNegative in such a way that the mean value for controlNegative is exactly equal to 1 and that all other values are expressed as a fraction thereof. Rerun your graphs with the normalized data. Why would you want to take this step?*
It makes it easier to compare relative changes across different conditions and facilitates the interpretation of treatment effects.

Lets test if this works